<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>بلاگ - N98N</title>
    <meta name="description" content="راهکارهای تخصصی اتوماسیون فرآیندهای کسب و کار با پلتفرم N98N">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/napkin.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <nav class="nav-container">
            <a href="https://n98n.ir" class="logo">
                <div class="logo-icon">N</div>
                <span class="logo-text">n98n</span>
            </a>
            <ul class="nav-menu">
                <li><a href="index.html" class="active">صفحه اصلی</a></li>
                <li><a href="#about">درباره ما</a></li>
                <li><a href="#services">خدمات</a></li>
                <li><a href="#contact">تماس با ما</a></li>
            </ul>
            <button class="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </button>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="blog-hero">
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">
                    بلاگ تخصصی <span class="highlight">هوشمند</span> برای توسعه‌دهندگان ایرانی
                </h1>
                <p class="hero-description">
                    راهکارهای تخصصی اتوماسیون فرآیندهای کسب و کار با استفاده از پلتفرم N98N طراحی شده برای نیازهای خاص بازار ایران. با ما همراه شوید تا در مسیر تحول دیجیتال سازمان خود را به سطح بالاتری از کارایی و بهره‌وری برسانید.
                </p>
                <a href="#posts" class="cta-button">
                    <i class="fas fa-rocket"></i>
                    مطالعه مقالات
                </a>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="main-container">
        <div class="content-wrapper">
            <!-- Blog Posts -->
            <section class="blog-posts" id="posts">
                <div class="section-header">
                    <div class="section-number">۱</div>
                    <div class="section-content">
                        <h2 class="section-title">آخرین مقالات</h2>
                        <p class="section-description">جدیدترین نکات و راهکارهای عملی برای بهبود کسب‌وکار شما</p>
                    </div>
                </div>
                
                <!-- Posts will be loaded here dynamically -->
                <div id="posts-container">
                    <!-- Loading placeholder -->
                    <div class="posts-loading">
                        <div class="loading-spinner" style="margin: 2rem auto;"></div>
                        <p style="text-align: center; color: var(--text-muted);">در حال بارگذاری مقالات...</p>
                    </div>
                </div>

                <!-- No posts message -->
                <div id="no-posts" style="display: none;">
                    <div class="no-posts-message">
                        <i class="fas fa-file-alt" style="font-size: 3rem; color: var(--primary-purple); margin-bottom: 1rem; opacity: 0.6;"></i>
                        <h3 style="color: var(--text-secondary); margin-bottom: 1rem;">هیچ مقاله‌ای یافت نشد</h3>
                        <p style="color: var(--text-muted);">در حال حاضر مقاله‌ای برای نمایش وجود ندارد.</p>
                    </div>
                </div>
            </section>

            <!-- Sidebar -->
            <aside class="sidebar">
                <!-- Search Widget -->
                <div class="sidebar-widget">
                    <h4>جستجو در مقالات</h4>
                    <div class="search-box">
                        <input type="text" class="search-input" placeholder="جستجو کنید..." id="search-input">
                        <button class="search-btn" id="search-btn">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>

                <!-- Categories Widget -->
                <div class="sidebar-widget">
                    <h4>دسته‌بندی‌ها</h4>
                    <ul class="category-list" id="categories-list">
                        <li class="loading-item" style="color: var(--text-muted);">در حال بارگذاری...</li>
                    </ul>
                </div>

                <!-- Recent Posts Widget -->
                <div class="sidebar-widget">
                    <h4>مقالات پربازدید</h4>
                    <ul class="recent-posts" id="featured-posts">
                        <li class="loading-item" style="color: var(--text-muted);">در حال بارگذاری...</li>
                    </ul>
                </div>

                <!-- Tags Widget -->
                <div class="sidebar-widget">
                    <h4>برچسب‌های محبوب</h4>
                    <div class="tags-cloud" id="tags-cloud">
                        <span class="loading-item" style="color: var(--text-muted);">در حال بارگذاری...</span>
                    </div>
                </div>

                <!-- Clear Filters Button -->
                <div class="sidebar-widget">
                    <button class="cta-button" id="clear-filters" style="width: 100%; font-size: 0.9rem; padding: 0.75rem 1.5rem;">
                        <i class="fas fa-refresh"></i>
                        نمایش همه مقالات
                    </button>
                </div>

                <!-- Newsletter Signup -->
                <div class="sidebar-widget" style="background: var(--gradient-purple); border-color: var(--primary-purple);">
                    <h4 style="color: var(--primary-purple);">عضویت در خبرنامه</h4>
                    <p style="color: var(--text-secondary); font-size: var(--text-sm); margin-bottom: var(--space-4);">
                        آخرین مقالات و نکات را مستقیماً در ایمیل خود دریافت کنید
                    </p>
                    <div style="display: flex; flex-direction: column; gap: var(--space-3);">
                        <input type="email" class="form-control" placeholder="ایمیل شما" style="font-size: var(--text-sm);">
                        <button class="btn-primary" style="font-size: var(--text-sm); padding: var(--space-2) var(--space-4);">
                            <i class="fas fa-envelope"></i>
                            عضویت
                        </button>
                    </div>
                </div>
            </aside>
        </div>

        <!-- Pagination -->
        <div class="pagination" id="pagination-container" style="display: none;">
            <!-- Pagination will be generated dynamically -->
        </div>
    </div>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-content">
                <h2 class="cta-title">آماده شروع هستید؟</h2>
                <p class="cta-description">
                    با n98n کسب‌وکار خود را به دست‌آوردهای باورنکردنی برسانید.
                    همین الان شروع کنید و تغییر را تجربه کنید.
                </p>
                <a href="https://n98n.ir" class="cta-button">
                    <i class="fas fa-rocket"></i>
                    شروع دوره آزمایشی رایگان
                    <i class="fas fa-arrow-left"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">
                <div class="logo-icon">N</div>
                <div class="logo-text">n98n</div>
            </div>
            <p class="footer-text">&copy; ۱۴۰۳ n98n. تمامی حقوق محفوظ است.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/blog.js"></script>
    
    <script>
        // Enhanced mobile menu functionality
        document.addEventListener('DOMContentLoaded', function() {
            const mobileBtn = document.querySelector('.mobile-menu-btn');
            const navMenu = document.querySelector('.nav-menu');
            const header = document.querySelector('.header');
            
            // Mobile menu toggle
            if (mobileBtn && navMenu) {
                mobileBtn.addEventListener('click', () => {
                    navMenu.classList.toggle('active');
                    mobileBtn.classList.toggle('active');
                });

                // Close mobile menu when clicking outside
                document.addEventListener('click', (e) => {
                    if (!navMenu.contains(e.target) && !mobileBtn.contains(e.target)) {
                        navMenu.classList.remove('active');
                        mobileBtn.classList.remove('active');
                    }
                });

                // Close mobile menu when clicking on a link
                navMenu.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', () => {
                        navMenu.classList.remove('active');
                        mobileBtn.classList.remove('active');
                    });
                });
            }

            // Header scroll effect
            let lastScrollY = window.scrollY;
            
            window.addEventListener('scroll', () => {
                const currentScrollY = window.scrollY;
                
                if (currentScrollY > 100) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
                
                // Hide header on scroll down, show on scroll up
                if (currentScrollY > lastScrollY && currentScrollY > 200) {
                    header.style.transform = 'translateY(-100%)';
                } else {
                    header.style.transform = 'translateY(0)';
                }
                
                lastScrollY = currentScrollY;
            });

            // Smooth scroll for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Search functionality
            const searchInput = document.getElementById('search-input');
            const searchBtn = document.getElementById('search-btn');
            
            if (searchInput && searchBtn) {
                searchBtn.addEventListener('click', performSearch);
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        performSearch();
                    }
                });
            }

            function performSearch() {
                const query = searchInput.value.trim();
                if (query) {
                    // Implement search functionality
                    console.log('Searching for:', query);
                    // This would typically integrate with your blog API
                }
            }

            // Clear filters functionality
            const clearFiltersBtn = document.getElementById('clear-filters');
            if (clearFiltersBtn) {
                clearFiltersBtn.addEventListener('click', function() {
                    // Clear all active filters
                    document.querySelectorAll('.category-list a.active').forEach(link => {
                        link.classList.remove('active');
                    });
                    document.querySelectorAll('.tag.active').forEach(tag => {
                        tag.classList.remove('active');
                    });
                    searchInput.value = '';
                    
                    // Reload all posts
                    if (typeof loadPosts === 'function') {
                        loadPosts();
                    }
                });
            }

            // Newsletter signup
            const newsletterForm = document.querySelector('.sidebar-widget form');
            if (newsletterForm) {
                newsletterForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const email = this.querySelector('input[type="email"]').value;
                    if (email) {
                        // Implement newsletter signup
                        console.log('Newsletter signup:', email);
                        alert('تشکر! شما با موفقیت در خبرنامه عضو شدید.');
                    }
                });
            }

            // Intersection Observer for animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-in');
                    }
                });
            }, observerOptions);

            // Observe blog cards for animation
            function observeBlogCards() {
                document.querySelectorAll('.blog-card').forEach(card => {
                    observer.observe(card);
                });
            }

            // Call observeBlogCards after posts are loaded
            setTimeout(observeBlogCards, 1000);

            // Loading manager
            window.loadingManager = {
                show: function(context = 'global') {
                    const overlay = document.querySelector('.loading-overlay');
                    if (overlay) {
                        overlay.classList.add('active');
                    }
                },
                hide: function(context = 'global') {
                    const overlay = document.querySelector('.loading-overlay');
                    if (overlay) {
                        overlay.classList.remove('active');
                    }
                }
            };

            // Error handler
            window.ErrorHandler = {
                success: function(message) {
                    this.showNotification(message, 'success');
                },
                error: function(message) {
                    this.showNotification(message, 'error');
                },
                showNotification: function(message, type = 'info') {
                    const notification = document.createElement('div');
                    notification.className = `notification ${type === 'error' ? 'notification-error' : ''}`;
                    notification.innerHTML = `
                        <div class="notification-content">
                            <i class="fas fa-${type === 'error' ? 'exclamation-triangle' : 'check-circle'}"></i>
                            <span>${message}</span>
                            <button class="notification-close">&times;</button>
                        </div>
                    `;
                    
                    document.body.appendChild(notification);
                    
                    // Auto remove after 5 seconds
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 5000);
                    
                    // Close button
                    notification.querySelector('.notification-close').addEventListener('click', () => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    });
                }
            };
        });
    </script>
</body>
</html>